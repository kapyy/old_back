<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>光环购物公园</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.0/animate.min.css">

  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
</head>

<body>
    <audio id='xxx' src='./static/mp3.mp3'  autoplay="autoplay" loop>
      您的浏览器不支持 audio 标签。
 </audio>
  <div id="app"></div>
</body>

</html>
<style>
  body {
    height: 100%;
    width: 100%;
    margin: 0;
    padding: 0;
  }
  #cnzz_stat_icon_1276878586{
    /* display: none; */
    display: block;
    height: 0px;
    width: 0px;
    overflow: hidden;
  }

  html {
    height: 100%;
    width: 100%;
    margin: 0;
    padding: 0;
  }

  #app {
    width: 100%;
    height: 100%;
    left: 0;
    top: 0;
    margin: 0;
    padding: 0;
  }

  * {
    margin: 0;
    padding: 0;
  }

</style>
<script src='http://res.wx.qq.com/open/js/jweixin-1.4.0.js'></script>
<script>
  axios.get('http://39.100.82.14:5015/api/getjsapi')
    .then(function (response) {
      wx.config({
        // debug: true, // 开启调试模式,调用的所有api的返回值会在客户端alert出来，若要查看传入的参数，可以在pc端打开，参数信息会通过log打出，仅在pc端时才会打印。
        appId: response.data.appId, // 必填，公众号的唯一标识
        timestamp: response.data.timestamp, // 必填，生成签名的时间戳
        nonceStr: response.data.nonceStr, // 必填，生成签名的随机串
        signature: response.data.signature, // 必填，签名
        jsApiList: ['onMenuShareAppMessage', 'updateTimelineShareData',
          'updateAppMessageShareData','onMenuShareTimeline'] // 必填，需要使用的JS接口列表
      });

      wx.ready(function () { //需在用户可能点击分享按钮前就先调用
        wx.onMenuShareTimeline({
          desc: '约42米高的穹顶、6000余平方米的森林空间、生命之树、悬浮秘境、天空步道……香港置地入渝15年恢宏巨献——光环购物公园，让您在城市中心，看见广袤森林！',
          title: "把7万株植物、25米飞瀑搬进商场 | 香港置地邀您一起探索未来伊甸园",
          imgUrl: 'http://www.kapychen.cn/static/share.png', // 分享图标
          success: function () {}
        })
        wx.onMenuShareAppMessage({
          title: "把7万株植物、25米飞瀑搬进商场 | 香港置地邀您一起探索未来伊甸园", // 分享标题
          desc: '约42米高的穹顶、6000余平方米的森林空间、生命之树、悬浮秘境、天空步道……香港置地入渝15年恢宏巨献——光环购物公园，让您在城市中心，看见广袤森林！',
          link: 'http://www.kapychen.cn', // 分享链接，该链接域名或路径必须与当前页面对应的公众号JS安全域名一致
          imgUrl: 'http://www.kapychen.cn/static/share.png', // 分享图标
          // type: 'link', // 分享类型,music、video或link，不填默认为link
          success: function () {
            // 用户确认分享后执行的回调函数
          },
          cancel: function () {
            // 用户取消分享后执行的回调函数
          }
        })

        // wx.onMenuShareAppMessage({
        //   title: 'title', // 分享标题
        //   desc: '最专业的金融信息搜索引擎！你想要的都在这里',
        //   link: 'http://www.kapychen.cn', // 分享链接，该链接域名或路径必须与当前页面对应的公众号JS安全域名一致
        //   // imgUrl: 'https://wx.tigerobo.com/img/logo_caishen_sm.png', // 分享图标
        //   type: 'link', // 分享类型,music、video或link，不填默认为link
        //   success: function () {
        //     // 用户确认分享后执行的回调函数
        //   },
        //   cancel: function () {
        //     // 用户取消分享后执行的回调函数
        //   }
        // })
        // wx.updateTimelineShareData({
        //   title: '123', // 分享标题
        //   desc: '321', // 分享描述
        //   link: 'http://www.q7k3d.cn', // 分享链接，该链接域名或路径必须与当前页面对应的公众号JS安全域名一致
        //   // imgUrl: 'https://wx.tigerobo.com/img/logo_caishen_sm.png', // 分享图标
        //   success: function () {
        //     alert(11)
        //   },
        //   error: function (i) {
        //     alert(i)
        //   }
        // })
        // wx.updateAppMessageShareData({
        //   title: './src/assets/01.jpg', // 分享标题
        //   desc: '', // 分享描述
        //   link: 'http://www.q7k3d.cn', // 分享链接，该链接域名或路径必须与当前页面对应的公众号JS安全域名一致
        //   // imgUrl: 'https://wx.tigerobo.com/img/logo_caishen_sm.png', // 分享图标
        //   success: function () {
        //     alert(11)
        //   },
        //   error: function (i) {
        //     alert(i)
        //   }
        // })
      });


      wx.error(function (res) {
        console.log(res)
        alert(res)
      });

    })
    .catch(function (error) {
      console.log(error);
    });

    document.addEventListener('DOMContentLoaded', function () {
    function audioAutoPlay() {
        var audio = document.getElementById('xxx');
        audio.play();
        document.addEventListener("WeixinJSBridgeReady", function () {
            audio.play();
        }, false);
    }
    audioAutoPlay();
    });
    function audioAutoPlay() {
    var audio = document.getElementById('xxx');
    audio.play();
    document.removeEventListener('touchstart',audioAutoPlay);
    }

    document.addEventListener('touchstart', audioAutoPlay);

</script>
<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? "https://" : "http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1276878586'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s23.cnzz.com/z_stat.php%3Fid%3D1276878586' type='text/javascript'%3E%3C/script%3E"));</script>

